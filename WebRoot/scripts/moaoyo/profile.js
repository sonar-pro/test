(function(b){if(typeof b.mk=="undefined"){b.mk={}}if(typeof b.mk.profile=="undefined"){b.mk.profile={}}b(function(){_setSelectData("height","height","height","heightUnit");_setSelectData("weight","weight","weight","weightUnit");_setSelectData("shape1","shape1","shape1","shapeUnit");_setSelectData("shape2","shape2","shape2","shapeUnit");_setSelectData("shape3","shape3","shape3","shapeUnit");_setSelectData("shoesSize","shoesSize","shoesSize","shoesSize");for(var d=0;d<10;d++){_setJobPriceSelectData("jobPrice1Select_"+d,"price");_setJobPriceSelectData("jobPrice2Select_"+d,"price")}});var a=[100,200,300,400,500,600,700,800,900,1000,1500,2000,2500,3000,3500,4000,4500,5000,6000,7000,8000,9000,10000,15000,20000,25000,30000,35000,40000,45000,50000,60000,70000,80000,90000,100000];_setJobPriceSelectData=function(g,d){if(b("#"+g).size()==0){return}b("#"+g).hide();b("<option />",{text:"价格选择",value:-1}).appendTo(b("#"+g));var f={};for(var e=0;e<a.length;e++){f={text:_getStringPrice(a[e]),value:a[e],selected:false};if(a[e]==b("#"+g).attr(d)){f.selected=true}b("<option />",f).appendTo(b("#"+g))}b("#"+g).show()};_setSelectData=function(i,h,d,g){if(b("#"+i).size()==0){return}var f=b("#"+i).attr(d);var g=b("#"+i).attr(g);f=f?f:0;var e=_setSelectNumber(h,g);_setOptionData(i,e.baseValue,e.iterTimes,f)};_updateSelectData=function(g,f,e){var d=_updateSelectNumber(g,f,e);b("#"+g).html("");_setOptionData(g,d.baseValue,d.iterTimes,d.selectValue)};_setSelectNumber=function(f,e){var d;var g;if(f=="height"){if(e=="INCH"){d=60;g=40}else{d=150;g=105}}else{if(f=="weight"){if(e=="POUND"){d=66;g=177}else{d=30;g=80}}else{if(f=="shape1"){if(e=="INCH"){d=28;g=44}else{d=70;g=110}}else{if(f=="shape2"){if(e=="INCH"){d=19;g=31}else{d=50;g=77}}else{if(f=="shape3"){if(e=="INCH"){d=31;g=45}else{d=80;g=113}}else{if(f=="shoesSize"){d=10;g=40}}}}}}return{baseValue:d,iterTimes:g}};_updateSelectNumber=function(i,g,f){var e;var d;var h;if(g=="height"){if(f=="CM"){e=Math.round(parseFloat(b("#"+i).val()*2.54));d=150;h=105}else{e=Math.round(parseFloat(b("#"+i).val()/2.54));d=60;h=40}}else{if(g=="weight"){if(f=="POUND"){e=Math.round(parseFloat(b("#"+i).val()/0.4536));d=66;h=177}else{e=Math.round(parseFloat(b("#"+i).val()*0.4536));d=30;h=80}}else{if(g=="shape1"){if(f=="INCH"){e=Math.round(parseFloat(b("#"+i).val()/2.54));d=28;h=44}else{e=Math.round(parseFloat(b("#"+i).val()*2.54));d=70;h=110}}else{if(g=="shape2"){if(f=="INCH"){e=Math.round(parseFloat(b("#"+i).val()/2.54));d=19;h=31}else{e=Math.round(parseFloat(b("#"+i).val()*2.54));d=50;h=77}}else{if(g=="shape3"){if(f=="INCH"){e=Math.round(parseFloat(b("#"+i).val()/2.54));d=31;h=45}else{e=Math.round(parseFloat(b("#"+i).val()*2.54));d=80;h=113}}}}}}return{baseValue:d,iterTimes:h,selectValue:e}};_setOptionData=function(j,f,d,g){b("#"+j).hide();b("<option />",{text:"请选择",value:0}).appendTo(b("#"+j));var h={};for(var e=0;e<=d;e++){h={text:f+e,value:f+e,selected:false};if(f+e==g){h.selected=true}b("<option />",h).appendTo(b("#"+j))}b("#"+j).show()};b.mk.profile.clearHometownInfo=function(d,e,f,g){b("#"+d).text("");b("#"+e).val("0");b("#"+f).val("0");b("#"+g).val("0")};b.mk.profile.clearBloodGroupInfo=function(){b("#bloodGroup").val("")};b.mk.profile.clearHeightInfo=function(){b("#height").val(0)};b.mk.profile.clearWeightInfo=function(){b("#weight").val(0)};b.mk.profile.clearShapeInfo=function(){b("#shape1").val(0);b("#shape2").val(0);b("#shape3").val(0)};b.mk.profile.clearHairColorInfo=function(){b("#hairColor").val("")};b.mk.profile.clearCarInfo=function(){b("#car").val("")};b.mk.profile.clearShoesSizeInfo=function(){b("#shoesSize").val(0)};b.mk.profile.convertHeight=function(d){var e=b("#heightDisplay").html().split(" ");if(e[1]=="CM"){if(Math.round(parseFloat(e[0])/2.54)%12==0){b("#heightDisplay").html(Math.floor(Math.round(parseFloat(e[0])/2.54)/12)+" FEET")}else{if((Math.round(parseFloat(e[0])/2.54)%12)>1){b("#heightDisplay").html(Math.floor(Math.round(parseFloat(e[0])/2.54)/12)+" FEET "+Math.round(parseFloat(e[0])/2.54)%12+" INCHES")}else{b("#heightDisplay").html(Math.floor(Math.round(parseFloat(e[0])/2.54)/12)+" FEET "+Math.round(parseFloat(e[0])/2.54)%12+" INCH")}}b("#heightImg").val("转换成CM")}else{if(b("#heightunit").val()=="CM"){b("#heightDisplay").html(d+" CM")}else{b("#heightDisplay").html(Math.round(parseFloat(d*2.54))+" CM")}b("#heightImg").val("转换成INCH")}};b.mk.profile.convertHeights=function(f,d){var e=(f=="CM")?"INCH":"CM";b("#heightImg").val("转换成"+e);if(f=="CM"){b("#heightDisplay").html(d+" "+f)}else{if(d%12==0){b("#heightDisplay").html(Math.floor(d/12)+" FEET")}else{if(d%12>1){b("#heightDisplay").html(Math.floor(d/12)+" FEET "+d%12+" INCHES")}else{b("#heightDisplay").html(Math.floor(d/12)+" FEET "+d%12+" INCH")}}}};b.mk.profile.convertWeight=function(e){var d=b("#weightDisplay").html().split(" ");if(d[1]=="POUND"){b("#weightDisplay").html(Math.round(d[0]*0.4536)+" KG");b("#weightImg").val("转换成POUND")}else{b("#weightDisplay").html(Math.round(parseFloat(d[0])/0.4536)+" POUND");b("#weightImg").val("转换成KG")}};b.mk.profile.convertWeights=function(e){var d=(e=="KG")?"POUND":"KG";b("#weightImg").val("转换成"+d)};b.mk.profile.convertShape=function(e,d,g){var f=b("#shapeDisplay").html().split(" ");if(f[3]=="CM"){shape1Value=Math.round(parseFloat(f[0])/2.54);shape2Value=Math.round(parseFloat(f[1])/2.54);shape3Value=Math.round(parseFloat(f[2])/2.54);b("#shapeDisplay").html(shape1Value+" "+shape2Value+" "+shape3Value+" INCH");b("#shapeImg").val("转换成CM")}else{b("#shapeDisplay").html(Math.round(parseFloat(f[0]*2.54))+" "+Math.round(parseFloat(f[1]*2.54))+" "+Math.round(parseFloat(f[2]*2.54))+" CM");b("#shapeImg").val("转换成INCH")}};b.mk.profile.convertShape1s=function(e){var d=(e=="CM")?"INCH":"CM";b("#shapeImg").val("转换成"+d)};b.mk.profile.changeHeightValue=function(d){_updateSelectData("height","height",d)};b.mk.profile.changeWeightValue=function(d){_updateSelectData("weight","weight",d)};b.mk.profile.changeShapeValue=function(d){_updateSelectData("shape1","shape1",d);_updateSelectData("shape2","shape2",d);_updateSelectData("shape3","shape3",d)};b.mk.profile.saveProfileData=function(d,g){if(g=="xueXiaoForm"){b("#daXueError").hide();var f=b.trim(b("#daXueName").val());var e=b("#daXueId").val();if(f.length==0){if((e.length!=0&&e!=0)||b("#year").val()!=0||b("#xueLi").val()!=""||b("#zhuanYeId").val()!=0){b("#daXueError").show();return}}else{if(e.length==0||e==0||b("#year").val()==0||b("#xueLi").val()==""||b("#zhuanYeId").val()==0){b("#daXueError").show();return}}}b.ajax({url:d,type:"post",data:b("#"+g).serialize(),success:function(h){if(h=="success"){b("#editResult").html("更新成功")}else{b("#editResult").html("操作错误")}b("#editResult").show()}})};b.mk.profile.saveJiChuData=function(d,e){if(!_checkIllegalValue()){return}b.mk.profile.saveProfileData(d,e)};b.mk.profile.saveJobLabelData=function(d,e){if(!_checkJobLabelValue()){return}b.mk.profile.saveProfileData(d,e)};var c=1;b.mk.profile.addCareer=function(f,d){var e="/jsps/profile/ProfileAjaxAddContentPage.jsp?index="+c+"&name="+f+"&random="+Math.random();b.ajax({url:e,type:"post",success:function(g){b("#"+d).append(g)}});c++};b.mk.profile.changeTextAreaHeight=function(f,d,e){var g=b("#"+f).val();if(g=="add"){b("#"+d).attr("class","big");b("#"+f).val("reduce");b("#"+e).html("<input class='btn f12' type='button' value='-减少高度' onfocus='this.blur()' />")}else{b("#"+d).attr("class","");b("#"+f).val("add");b("#"+e).html("<input class='btn f12' type='button' value='+增加高度' onfocus='this.blur()' />")}};b.mk.profile.clearDaXueData=function(){b("#daXueName").val("");b("#daXueId").val(0);b("#year").val(0);b("#xueLi").val("");b("#zhuanYeId").html("<option value='0'>院系</option>");b("#year").attr("disabled",true);b("#xueLi").attr("disabled",true);b("#zhuanYeId").attr("disabled",true)};b.mk.profile.clearInputData=function(d){b("#"+d).val("")};b.mk.profile.getDaXueNames=function(d){var e=b.trim(d.value);if(e.length==0){return}b.ajax({url:"/updateProfile|getDaXueNamesAjax.action?r="+Math.random(),type:"post",dataType:"json",data:{xueXiaoName:e},success:function(f){if(f=="dataErr"){return}b("#moko-pinyinSearch-list").html("").hide();for(var g=0;g<f.length;g++){b("#moko-pinyinSearch-list").html(b("#moko-pinyinSearch-list").html()+"<li><a href='javascript:void(0);' onclick='jQuery1.mk.profile.setZhuanYeData("+f[g].id+',"'+f[g].name+"\");return false;'>"+f[g].name+"</a></li>")}if(b("#moko-pinyinSearch-list").html().length>0){b("#moko-pinyinSearch-list").bgiframe().show()}}})};b.mk.profile.setZhuanYeData=function(e,d){b("#daXueName").val(d);b("#daXueId").val(e);b("#year").removeAttr("disabled");b("#xueLi").removeAttr("disabled");b("#zhuanYeId").removeAttr("disabled");b.ajax({url:"/updateProfile|getZhuanYeDataAjax.action?r="+Math.random(),type:"post",dataType:"json",data:{daXueId:e},success:function(f){if(f=="dataErr"){return}b("#zhuanYeId").html("");b("<option />",{value:0,text:"院系"}).appendTo("#zhuanYeId");for(var g=0;g<f.length;g++){b("<option />",{value:f[g].id,text:f[g].name}).appendTo("#zhuanYeId")}}})};b.mk.profile.delContent=function(d){if(!confirm("确定要删除吗？")){return}b("#"+d).remove()};b.mk.profile.cropModule=function(e,d){b.mokoDialog.close();b.mokoDialog({url:e,initFn:_loadCareer})};b.mk.profile.saveSort=function(){var d="";b("#photo_list").find("li").each(function(){d+=this.id.split("_")[1]+","});b.ajax({url:"/updateProfile|saveUserProfileModuleSort.action",type:"post",data:"strSeq="+d,success:function(e){if(e=="success"){b.reload()}b.mokoDialog.close()}})};b.mk.profile.showEditProfile=function(){b.location("/updateProfile|showEditModule.action?expTypeId=1&random="+Math.random())};b.mk.profile.changeHideAge=function(d){if(d.checked){b("#hideAge").val("T")}else{b("#hideAge").val("F")}};b.mk.profile.showJobLabelPrice=function(e,d,g){var f="";if(e!=0&&d!=0){f=_getStringPrice(e)+"-"+_getStringPrice(d)}else{if(e!=0){f=_getStringPrice(e)}else{if(d!=0){f=_getStringPrice(d)}}}b("#"+g).html(f)};_getStringPrice=function(e){if(!e||e<100){return}var d=String(e);if(e>=1000&&e<10000){d=d.substring(0,1)+","+d.substring(1)}else{if(e>=10000){d=parseInt(e/10000);if(e%10000!=0){d+="."+parseInt(e%10000/1000)}d+="万"}}return d+="元"};_loadCareer=function(){var f=b("#careerModuleNum").val();var g="";var d;for(var e=0;e<f;e++){d=b("#careerMode_"+e).val();g+='<li id="base_'+d.split("_")[0]+'"><a style="cursor:move;" class="weight700" href="javascript:void(0)">'+d.split("_")[1]+"</a></li>"}b("#photo_list").html(g);b("#photo_list").sortable();b("#photo_list").disableSelection()};_checkJobLabelValue=function(){var g=true;var h;var e;var d;for(var f=0;f<10;f++){h=false;e=false;b("#jobLabelData_"+f).find("input,select").each(function(){if(b(this).is("select")&&b(this).val()!=-1){e=true}if(b(this).is("input")&&b(this).val().trim()!=""&&b(this).val().trim()!="例如：人像摄影"){d=b.stringUtil.getContentLength(b(this).val().trim());if(d<2||d>16){_loadProfileJobLabelAlertView(2);g=false;return}h=true}});if((h&&!e)||(!h&&e)){_loadProfileJobLabelAlertView(1);return false}}return g};_checkIllegalValue=function(){var h="";var i=true;if(b.trim(b("#brithday").val())==""){h+="请选择出生日期,";i=false}var f=b("#countryId_0").val();var l=b("#provinceId_0").val();var n=b("#cityId_0").val();if(!jQuery1.mk.common.checkLocation(f,l,n)){h+="请选择工作地1,";i=false}var e=b("#countryId_1").val();var k=b("#provinceId_1").val();var m=b("#cityId_1").val();if(e!=0&&!jQuery1.mk.common.checkLocation(e,k,m)){h+="请选择工作地2,";i=false}var d=b("#jxCountryId").val();var g=b("#jxProvinceId").val();var j=b("#jxCityId").val();if(d!=0&&!jQuery1.mk.common.checkLocation(d,g,j)){h+="请填写完整的家乡信息,";i=false}var q=b("#shape1").val();var p=b("#shape2").val();var o=b("#shape3").val();if(!(q==0&&p==0&&o==0)&&!(q!=0&&p!=0&&o!=0)){h+="请填写完整的三围信息,";i=false}if(h!=""){alert(h.substring(0,h.length-1))}return i};_loadProfileJobLabelAlertView=function(e){var d=b.param({showType:e});b.mokoDialog({url:"/jsps/profile/ProfileJobLabelAlertView.jsp?"+d})};b(document).ready(function(){b("div[name='showAddressDiv']").LocationSelect({callback:d});b("div[name='showAddressJXDiv']").LocationSelect({callback:e});b("div[name='showAddressDiv_0']").LocationSelect({callback:f});b("div[name='showAddressDiv_1']").LocationSelect({callback:g});function d(h){b("#countryId").val(h.countryId);b("#provinceId").val(h.provinceId);b("#cityId").val(h.cityId)}function f(h){b("#countryId_0").val(h.countryId);b("#provinceId_0").val(h.provinceId);b("#cityId_0").val(h.cityId)}function g(h){b("#countryId_1").val(h.countryId);b("#provinceId_1").val(h.provinceId);b("#cityId_1").val(h.cityId);b("#addressText_1").removeClass()}function e(h){b("#jxCountryId").val(h.countryId);b("#jxProvinceId").val(h.provinceId);b("#jxCityId").val(h.cityId)}});b.mk.profile.getConstellation=function(){var d=b("#brithday").val();if(!d){return}b.ajax({url:"/updateProfile|getUserConstellation.action",type:"get",data:"jiChuBean.brithday="+d,success:function(e){if(e=="dataErr"){alert("操作错误！")}else{var f=e.split("_");b("#constellationImg").attr("src",mokosimg+"/images/astro/"+f[0]+".gif");b("#constellationText").html(f[1]);b("#constellation").val(f[0])}}})};b.mk.profile.birthYear=function(g,f){var e=new Date().getYear();if(e<1000){e+=1900}var h=g?g:"";for(var d=0;d<80;d++){document.write("<option value="+e);if(e==h){document.write(" selected")}document.write(" >"+e+"</option>");if(f=="project"){e++}else{e--}}};b.mk.profile.birthMonth=function(d){var g=new Date().getMonth();var f=d?d:"";for(var e=1;e<=12;e++){document.write("<option value="+e);if(e==f){document.write(" selected")}document.write(">"+e+"</option>")}};b.mk.profile.birthDay=function(g){var d=new Date().getDay();var f=g?g:"";for(var e=1;e<=31;e++){document.write("<option value="+e);if(e==f){document.write(" selected")}document.write(">"+e+"</option>")}};b(function(){b(".profile-box textarea,.profile-box input:text").autoText();b(".profile-nav-list li:not(.alive)").hover(function(){b(this).toggleClass("alive").find(".bg").hide()},function(){b(this).toggleClass("alive")})})})(jQuery1);